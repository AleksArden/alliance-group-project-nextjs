import { Metadata } from 'next';

type RouteProps = {
  params: { locale: string };
  searchParams: { [key: string]: string | string[] | undefined };
};
export async function generateMetadata(props: RouteProps): Promise<Metadata> {
  const intl = await getIntl(props.params.locale);

  return {
    title: intl.formatMessage({ id: 'page.productsServices.head.title' }),
    description: 'Generated by create next app',
  };
}
import styles from './ProductsServices.module.scss';
import {
  getAllProducts,
  getAllServices,
  getDataFromFirestore,
} from '@/firebase/getData';
import HeroSection from 'components/heroSection/HeroSection';
import Content from 'components/content/Content';

import ProductsServicesList from 'components/productsServicesList/ProductsServicesList';
import { Lang } from 'types/otherType';
import { ProductsServicesType } from 'types/dataTypeForFirebase';
import { getIntl } from 'lib/intl';

type IProps = {
  params: { locale: string };
};

const ProductsServices = async ({ params: { locale } }: IProps) => {
  const data = await getDataFromFirestore<ProductsServicesType>(
    'products-services'
  );
  // console.log('page products-services', data);
  const listAllProducts = await getAllProducts();
  // console.log('Page ProductsServices', listAllProducts);
  const listAllServices = await getAllServices();
  // console.log('Page ProductsServices', listAllServices);
  return (
    <>
      {locale === Lang.UK && (
        <HeroSection
          backgroundImage={data?.backgroundImageDesktop}
          title={data?.titleUK}
          subtitle={data?.subtitleUK}
        />
      )}
      {locale === Lang.EN && (
        <HeroSection
          backgroundImage={data?.backgroundImageDesktop}
          title={data?.titleEN}
          subtitle={data?.subtitleEN}
        />
      )}
      {locale === Lang.TR && (
        <HeroSection
          backgroundImage={data?.backgroundImageDesktop}
          title={data?.titleTR}
          subtitle={data?.subtitleTR}
        />
      )}
      <section className={styles.container}>
        {data?.textUK && locale === Lang.UK && (
          <div className={styles.contentWrapper}>
            <Content content={data?.textUK} />
          </div>
        )}
        {data?.textEN && locale === Lang.EN && (
          <div className={styles.contentWrapper}>
            <Content content={data?.textEN} />
          </div>
        )}
        {data?.textTR && locale === Lang.TR && (
          <div className={styles.contentWrapper}>
            <Content content={data?.textTR} />
          </div>
        )}

        <ProductsServicesList
          products={listAllProducts}
          services={listAllServices}
          locale={locale}
        />
      </section>
    </>
  );
};
export default ProductsServices;
